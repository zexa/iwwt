{% extends 'base.html.twig' %}

{% block title %}Books{% endblock %}

{% block stylesheets %}
<style>
.red {
    border-color: var(--pico-color-red-400);
    color: var(--pico-color-red-400);
}

.red:hover {
    border-color: var(--pico-color-red-300);
    color: var(--pico-color-red-300);
}

</style>
{% endblock %}


{% block body %}
    <h1>Books</h1>
    <input
    type="search"
    name="search"
    placeholder="Search"
    aria-label="Search"
    />
    {% for book in books %}
    <article>
        <hgroup>
            <h3>{{ book.title }}</h3>
            <p>{{ book.author }}</p>
        </hgroup>

        <strong>ISBN:</strong> {{ book.isbn }}
        <br>

        <strong>Publication Date:</strong> {{ book.publicationDate|date('Y-m-d') }}
        <br>

        <strong>Genres:</strong> {{ book.genres|join(', ') }}
        <br>

        <strong>Number of Copies:</strong> {{ book.copies }}
        <br>

        {% if app.user %}
            <hr>
            <form action="{{ path('app_edit_book', {'bookId': book.id}) }}" method="PUT">
                <input type="hidden" name="_method" value="PUT">
                <button class="outline" type="submit">Edit</button>
            </form>

            <form action="{{ path('app_delete_book', {'bookId': book.id}) }}" method="DELETE" onsubmit="return confirm('Are you sure you want to delete this book?');">
                <input type="hidden" name="_method" value="DELETE">
                <button class="outline red" type="submit">Remove</button>
            </form>
        {% endif %}
    </article>
{% endfor %}

{% if app.user %}
    <form action="{{ path('app_new_book') }}" method="post">
        <input type="hidden" name="_method" value="POST">
        <button type="submit">New Book</button>
    </form>
{% endif %}
{% endblock %}
